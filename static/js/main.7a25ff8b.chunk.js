(this["webpackJsonpreact_people-table-basics"]=this["webpackJsonpreact_people-table-basics"]||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var c=n(24),a=n(7),r=n(4),s=n(8),l=n(0);function i(){return(e=500,new Promise((function(t){return setTimeout(t,e)}))).then((function(){return fetch("https://mate-academy.github.io/react_people-table/api/people.json")})).then((function(e){return e.json()}));var e}var o=function(e){return e.FETCH_ERROR="Something went wrong",e.EMPTY_ERROR="There are no people on the server",e}({}),j=n(3),d={people:[],selectedPerson:null,isLoading:!1,error:null},b=function(e,t){var n;switch(t.type){case"SET_PEOPLE":return Object(s.a)(Object(s.a)({},e),{},{people:t.payload});case"SELECT_PERSON":return Object(s.a)(Object(s.a)({},e),{},{selectedPerson:null!==(n=e.people.find((function(e){return e.slug===t.payload})))&&void 0!==n?n:null});case"SET_LOADING":return Object(s.a)(Object(s.a)({},e),{},{isLoading:t.payload});case"SET_ERROR":return Object(s.a)(Object(s.a)({},e),{},{error:t.payload});default:return e}},h=Object(l.createContext)({state:d,dispatch:function(){return null}}),u=function(e){var t=e.children,n=Object(l.useReducer)(b,d),c=Object(r.a)(n,2),a=c[0],s=c[1];Object(l.useEffect)((function(){s({type:"SET_LOADING",payload:!0}),i().then((function(e){s({type:"SET_PEOPLE",payload:e}),e.length||s({type:"SET_ERROR",payload:o.EMPTY_ERROR}),s({type:"SET_LOADING",payload:!1})})).catch((function(){s({type:"SET_ERROR",payload:o.FETCH_ERROR}),s({type:"SET_LOADING",payload:!1})}))}),[]);var u={state:a,dispatch:s};return Object(j.jsx)(h.Provider,{value:u,children:t})},O=(n(34),n(35),n(2)),p=n(19),x=n.n(p);function m(e){return x()("navbar-item",{"has-background-grey-lighter":e})}var f=function(){return Object(j.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"navbar-brand",children:[Object(j.jsx)(a.c,{to:"/",className:function(e){return m(e.isActive)},children:"Home"}),Object(j.jsx)(a.c,{to:"/people",className:function(e){return m(e.isActive)},children:"People"})]})})})},E=function(){return Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("h1",{className:"title",children:"Home Page"})})},v=function(){return Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("h1",{className:"title",children:"Page not found"})})},g=(n(36),function(){return Object(j.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(j.jsx)("div",{className:"Loader__content"})})}),R=function(){var e=Object(l.useContext)(h).dispatch,t=Object(l.useContext)(h).state,n=t.isLoading,c=t.people,r=t.selectedPerson,s=t.error,i=function(e,t,n){var c=t.find((function(t){return t.name===e})),r=c?c.slug:null,s="f"===(null===c||void 0===c?void 0:c.sex)?"has-text-danger":"";return r?Object(j.jsx)(a.b,{to:"/people/".concat(r),onClick:function(){return n({type:"SELECT_PERSON",payload:r})},className:s,children:e}):e};return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h1",{className:"title",children:"People Page"}),Object(j.jsx)("div",{className:"block",children:Object(j.jsxs)("div",{className:"box table-container",children:[n&&Object(j.jsx)(g,{}),s===o.EMPTY_ERROR&&Object(j.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),s===o.FETCH_ERROR?Object(j.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:"Something went wrong"}):Object(j.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Name"}),Object(j.jsx)("th",{children:"Sex"}),Object(j.jsx)("th",{children:"Born"}),Object(j.jsx)("th",{children:"Died"}),Object(j.jsx)("th",{children:"Mother"}),Object(j.jsx)("th",{children:"Father"})]})}),Object(j.jsx)("tbody",{children:c.map((function(t){return Object(j.jsxs)("tr",{className:x()({"has-background-warning":t.slug===(null===r||void 0===r?void 0:r.slug)}),children:[Object(j.jsx)("td",{children:Object(j.jsx)(a.b,{to:"/people/".concat(t.slug),className:"f"===t.sex?"has-text-danger":"",onClick:function(){return function(e,t){e({type:"SELECT_PERSON",payload:t})}(e,t.slug)},children:t.name})}),Object(j.jsx)("td",{children:t.sex}),Object(j.jsx)("td",{children:t.born}),Object(j.jsx)("td",{children:t.died}),Object(j.jsx)("td",{children:i(t.motherName,c,e)}),Object(j.jsx)("td",{children:i(t.fatherName,c,e)})]},t.slug)}))})]})]})})]})},y=(n(37),function(){return Object(j.jsxs)("div",{"data-cy":"app",children:[Object(j.jsx)(f,{}),Object(j.jsx)("main",{className:"section",children:Object(j.jsxs)(O.d,{children:[Object(j.jsx)(O.b,{path:"/",element:Object(j.jsx)(E,{})}),Object(j.jsx)(O.b,{path:"/home",element:Object(j.jsx)(O.a,{to:"/",replace:!0})}),Object(j.jsx)(O.b,{path:"*",element:Object(j.jsx)(v,{})}),Object(j.jsx)(O.b,{path:"/people",element:Object(j.jsx)(R,{})}),Object(j.jsx)(O.b,{path:"/people/:slug",element:Object(j.jsx)(R,{})})]})})]})});Object(c.createRoot)(document.getElementById("root")).render(Object(j.jsx)(u,{children:Object(j.jsx)(a.a,{children:Object(j.jsx)(y,{})})}))}},[[38,1,2]]]);
//# sourceMappingURL=main.7a25ff8b.chunk.js.map